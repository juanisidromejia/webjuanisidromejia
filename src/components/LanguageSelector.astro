---
// Componente para cambiar idioma
import { languageStore } from '../stores/language';

const currentLang = languageStore.get();
const locales = [
    { code: 'es', name: 'ES' },
    { code: 'en', name: 'EN' },
    { code: 'ru', name: 'RU' }
] as const;
---

<div class="language-selector flex gap-2">
  {locales.map(locale => {
    const isActive = currentLang === locale.code;

    return (
      <button
        id={`lang-${locale.code}`}
        class:list={[
          "px-2 py-1 text-sm font-medium rounded transition-colors",
          isActive
            ? "bg-main text-white"
            : "text-main hover:bg-main hover:text-white"
        ]}
      >
        {locale.name}
      </button>
    );
  })}
</div>

<script>
  import { languageStore, setLanguage, type Language } from '../stores/language';

  // Add event listeners to buttons
  const locales: Language[] = ['es', 'en', 'ru'];
  locales.forEach(lang => {
    const btn = document.getElementById(`lang-${lang}`);
    btn?.addEventListener('click', () => {
      setLanguage(lang);
    });
  });
</script>